const t="data-on-".length,n=(t,n,e,o)=>{const s=((t,n)=>{const e=`with(context) { return ${n} }`;if(t[n]){const n=new Function("context",e)(t);return function(){n.apply(t,arguments)}}{const n=new Function("context","$event",e);return e=>n.call(t,t,e)}})(o,e);t.addEventListener(n,s)},e=(t,n,o=!1)=>{o||n(t,!1);let s=t.firstElementChild;for(;s;){if(!s.hasAttribute("data-very-ignore")){const t=s.hasAttribute("data-component");n(s,t),!t&&e(s,n,!0)}s=s.nextElementSibling}},o={},s=(t,n)=>(o[t]=n,n),r=(s,r=null,c=!1)=>{r=r??(t=>o[t.dataset.component])(s);const i=[],l={};e(s,((n,e)=>{const{ref:o}=n.dataset;if(o){const t=l[o];l[o]=t?Array.isArray(t)?t.concat(t,n):[t,n]:n}if(!e){const e=(n=>{const e=[],{length:o}=n.attributes;for(let s=0;s<o;s++){const{nodeName:o,nodeValue:r}=n.attributes[s];o.startsWith("data-on-")&&e.push({el:n,event:o.substring(t),expression:r})}return e.length&&e})(n);e&&i.push(e)}}));const u=r({el:s,refs:l});((t,e)=>{for(const{el:o,event:s,expression:r}of t)n(o,s,r,e)})(i,u);s.$very=u,c||a(s)},c=(t=document.body)=>{a(t)},a=t=>{for(const n in o){const e=t.querySelectorAll(`[data-component='${n}']`);for(let t=0;t<e.length;t++){const s=e[t];r(s,o[n],!0)}}};export{r as mountComponent,c as mountComponents,s as registerComponent};
