const i={},u=t=>i[t.dataset.component],r=(t,n,e=!1)=>{e||n(t,!1);let o=t.firstElementChild;for(;o;){if(!o.hasAttribute("data-very-ignore")){const s=o.hasAttribute("data-component");n(o,s),!s&&r(o,n,!0)}o=o.nextElementSibling}},a=(t,n)=>{if(typeof n!="function")throw new Error(`Component ${t} is not a function.`);return i[t]=n,n},c=(t,n=!1)=>{if(!t.$component){const e=d(t),o=Object.fromEntries(Object.entries(e).map(([m,p])=>[m,p[0]])),s=u(t);s&&(t.$component=s({el:t,refs:o,refsAll:e})||{})}n||f(t)},f=t=>{const n=t.querySelectorAll("[data-component]");for(let e=0;e<n.length;e++){const o=n[e];c(o,!0)}},l=(t=document.body)=>{f(t)},d=t=>{const n={};return r(t,e=>{const{ref:o}=e.dataset;if(o){const s=n[o];s?s.push(e):n[o]=[e]}}),n};export{c as mountComponent,l as mountComponents,a as registerComponent,r as walkComponent};
