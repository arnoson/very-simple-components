const t="data-on-".length,e=(t,e,n,o)=>{const r=((t,e)=>{const n=`with(context) { return ${e} }`;if(t[e]){const e=new Function("context",n)(t);return function(){e.apply(t,arguments)}}{const e=new Function("context","$event",n);return n=>e.call(t,t,n)}})(o,n);t.addEventListener(e,r)},n=(t,e,o=!1)=>{o||e(t);let r=t.firstElementChild;for(;r;)r.hasAttribute("data-component")||r.hasAttribute("data-very-ignore")||(r.style.backgroundColor="yellow",e(r),n(r,e,!0)),r=r.nextElementSibling},o={},r=(t,e)=>(o[t]=e,e),a=(r,a=null,c=!1)=>{const s=(t=>{const e={},n=t.querySelectorAll("[data-ref]");for(let t=0;t<n.length;t++){const o=n[t],{ref:r}=o.dataset,a=e[r];e[r]=a?Array.isArray(a)?a.concat(a,o):[a,o]:o}return e})(r),i=(a=a??(t=>o[t.dataset.component])(r))({el:r,refs:s});n(r,(n=>((n,o)=>{const{length:r}=n.attributes;for(let a=0;a<r;a++){const{nodeName:r,nodeValue:c}=n.attributes[a];r.startsWith("data-on-")&&e(n,r.substring(t),c,o)}})(n,i))),c||l(r)},c=(t=document.body)=>{l(t)},l=t=>{for(const e in o){const n=t.querySelectorAll(`[data-component='${e}']`);for(let t=0;t<n.length;t++){const r=n[t];a(r,o[e],!0)}}};export{a as mountComponent,c as mountComponents,r as registerComponent};
